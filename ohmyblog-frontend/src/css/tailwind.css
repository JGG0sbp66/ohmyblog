/* src/css/tailwind.css */
@import "tailwindcss";

/* 映射层 将主题映射给 Tailwind */
@theme {
  /* --- 全局字体设置 --- */
  --font-sans:
    "Inter", "Noto Sans SC", "PingFang SC", "Microsoft YaHei", "sans-serif";

  /* 按钮颜色：强调、交互重点 */
  --color-accent: var(--theme-accent);
  --color-accent-hover: var(--theme-accent-hover);
  --color-accent-active: var(--theme-accent-active);

  /* --- 背景色 --- */
  /* bg: 页面主背景；bg-muted: 次级背景区块 */
  --color-bg: var(--theme-bg);
  --color-bg-muted: var(--theme-bg-muted);
  --color-bg-card: var(--theme-bg-card);

  /* --- 文本色 --- */
  /* fg: 主文本；fg-muted: 次要文本；fg-subtle: 更弱的文字/图标色 */
  /* fg-soft: fg-subtle 的软化版，用于占位、提示等弱化场景 */
  --color-fg: var(--theme-fg);
  --color-fg-muted: var(--theme-fg-muted);
  --color-fg-soft: var(--theme-fg-soft);
  --color-fg-subtle: var(--theme-fg-subtle);
}

/* --- 主题定义层 --- */

/* 1. 基础变量与默认值 */
:root {
  /* 
       默认 Hue (兜底用，JS 加载后会覆盖它) 
       250 = 蓝色
    */
  --app-hue: 250;

  /* 
       统一的主色调生成逻辑 (使用 OKLCH)
       无需再为每个颜色写单独的 class
    */
  /* Light Mode 下的主色 */
  --theme-accent: oklch(0.6 0.18 var(--app-hue));
  --theme-accent-hover: oklch(0.55 0.18 var(--app-hue));
  --theme-accent-active: oklch(0.5 0.18 var(--app-hue));

  /* --- 背景色 --- */
  /* bg: 页面主背景；bg-muted: 次级背景区块 */
  --theme-bg: oklch(0.97 0.01 var(--app-hue));
  --theme-bg-muted: oklch(0.95 0.03 var(--app-hue));
  --theme-bg-card: white;

  /* --- 文本色 --- */
  /* fg: 主文本；fg-muted: 次要文本；fg-subtle: 更弱的文字/图标色 */
  --theme-fg: oklch(0.2 0.03 var(--app-hue));
  --theme-fg-muted: #00000080;
  --theme-fg-subtle: oklch(0.65 0.15 var(--app-hue));
  --theme-fg-soft: color-mix(in oklch, var(--theme-fg-subtle) 40%, transparent);

  /* 浏览器系统样式 */
  color-scheme: light;
}

/* 2. 深色模式逻辑 */
@variant dark (&:where(.dark, .dark *));

.dark {
  /* Dark Mode 下的主色 */
  --theme-accent: oklch(0.65 0.18 var(--app-hue));
  --theme-accent-hover: oklch(0.7 0.18 var(--app-hue));
  --theme-accent-active: oklch(0.6 0.18 var(--app-hue));

  /* --- 背景色 --- */
  /* bg: 页面主背景；bg-muted: 次级背景区块 */
  --theme-bg: oklch(0.16 0.014 var(--app-hue));
  --theme-bg-muted: oklch(0.25 0.03 var(--app-hue));
  --theme-bg-card: oklch(0.2 0.02 var(--app-hue));

  /* --- 文本色 --- */
  /* fg: 主文本；fg-muted: 次要文本；fg-subtle: 更弱的文字/图标色 */
  --theme-fg: oklch(0.95 0.01 var(--app-hue));
  --theme-fg-muted: #ffffff80;
  --theme-fg-subtle: oklch(0.75 0.14 var(--app-hue));
  --theme-fg-soft: color-mix(in oklch, var(--theme-fg-subtle) 40%, transparent);

  color-scheme: dark;
}

/* 全局过渡效果 */
@layer base {
  *,
  ::after,
  ::before {
    /* 统一的全局过渡：200ms，包含常用属性 */
    transition-property:
      color, background-color, border-color, fill, stroke, stop-color, opacity,
      stop-opacity, transform, scale, box-shadow, width;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 200ms;
  }
}

body {
  background-color: var(--theme-bg);
  color: var(--theme-fg);
}

@layer utilities {
  /* 禁用文字颜色过渡的工具类（主题切换时使用，避免黑白闪烁） */
  .no-color-transition,
  .no-color-transition *,
  .no-color-transition ::before,
  .no-color-transition ::after {
    transition-property:
      background-color, border-color, fill, stroke, stop-color, opacity,
      stop-opacity, transform, scale, box-shadow, width !important;
  }
}
