/* src/css/tailwind.css */
@import "tailwindcss";

/* 映射层 将主题映射给 Tailwind */
@theme {
    /* --- 全局字体设置 --- */
    --font-sans:
        "Inter", "Noto Sans SC", "PingFang SC", "Microsoft YaHei", "sans-serif";

    /* 按钮颜色 */
    --color-primary: var(--theme-primary);
    --color-primary-hover: var(--theme-primary-hover);
    --color-primary-active: var(--theme-primary-active);

    /* --- 背景色 --- */
    --color-bg-page: var(--theme-bg-page);
    --color-bg-secondary: var(--theme-bg-secondary);
    --color-bg-card: var(--theme-bg-card);

    /* --- 文本色 --- */
    --color-text-main: var(--theme-text-main);
    --color-text-on-primary: var(--theme-text-on-primary);
    --color-text-icon: var(--theme-text-icon);
}

/* --- 主题定义层 --- */

/* 1. 基础变量与默认值 */
:root {
    /* 
       默认 Hue (兜底用，JS 加载后会覆盖它) 
       250 = 蓝色
    */
    --app-hue: 250;

    /* 
       统一的主色调生成逻辑 (使用 OKLCH)
       无需再为每个颜色写单独的 class
    */
    /* Light Mode 下的主色 */
    --theme-primary: oklch(0.60 0.18 var(--app-hue));
    --theme-primary-hover: oklch(0.55 0.18 var(--app-hue));
    --theme-primary-active: oklch(0.50 0.18 var(--app-hue));

    /* --- 背景色 --- */
    --theme-bg-page: oklch(0.97 0.01 var(--app-hue));
    --theme-bg-secondary: oklch(0.95 0.03 var(--app-hue));
    --theme-bg-card: white;

    /* --- 文本色 --- */
    --theme-text-main: oklch(0.20 0.03 var(--app-hue));
    --theme-text-on-primary: white;
    --theme-text-icon: oklch(0.65 0.15 var(--app-hue));

    /* 浏览器系统样式 */
    color-scheme: light;
}

/* 2. 深色模式逻辑 */
@variant dark (&:where(.dark, .dark *));

.dark {
    /* Dark Mode 下的主色 */
    --theme-primary: oklch(0.65 0.18 var(--app-hue));
    --theme-primary-hover: oklch(0.70 0.18 var(--app-hue));
    --theme-primary-active: oklch(0.60 0.18 var(--app-hue));

    /* --- 背景色 --- */
    --theme-bg-page: oklch(0.16 0.014 var(--app-hue));
    --theme-bg-secondary: oklch(0.25 0.030 var(--app-hue));
    --theme-bg-card: oklch(0.20 0.020 var(--app-hue));

    /* --- 文本色 --- */
    --theme-text-main: oklch(0.95 0.01 var(--app-hue));
    --theme-text-on-primary: white;
    --theme-text-icon: oklch(0.75 0.14 var(--app-hue));

    color-scheme: dark;
}

/* 全局过渡效果 */
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(
            --color-gray-200,
            currentColor
        ); /* 默认边框色处理，防止过渡时闪烁 */
    }

    *,
    ::after,
    ::before {
        /* 保留主题切换的“视觉过渡”，但去掉文字 color 的过渡，避免黑白闪烁 */
        transition-property:
            background-color,
            border-color,
            fill,
            stroke,
            stop-color,
            opacity,
            stop-opacity;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 200ms;
    }
}

body {
    background-color: var(--theme-bg-page);
    color: var(--theme-text-main);
}
